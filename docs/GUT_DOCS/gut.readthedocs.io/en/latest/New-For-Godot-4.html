<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Godot 4 Changes &mdash; GUT 9.4.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/gut_custom.css" type="text/css" />
      <link rel="stylesheet" href="_static/dark_mode_css/general.css" type="text/css" />
      <link rel="stylesheet" href="_static/dark_mode_css/dark.css" type="text/css" />
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js%3Fv=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js%3Fv=2cd50e6c"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js%3Fv=354d2d61"></script>
        <script src="_static/doctools.js%3Fv=888ff710"></script>
        <script src="_static/sphinx_highlight.js%3Fv=4825356b"></script>
        <script src="_static/dark_mode_js/default_dark.js%3Fv=fd565c74"></script>
        <script src="_static/dark_mode_js/theme_switcher.js%3Fv=358d3910"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="GutTest" href="class_ref/class_guttest.html" />
    <link rel="prev" title="Command Line" href="Command-Line.html" /> 
<script async type="text/javascript" src="../../_/static/javascript/readthedocs-addons.js"></script><meta name="readthedocs-project-slug" content="gut" /><meta name="readthedocs-version-slug" content="latest" /><meta name="readthedocs-resolver-filename" content="/New-For-Godot-4.html" /><meta name="readthedocs-http-status" content="200" /></head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            GUT
              <img src="_static/GutDocsLogo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                9.4.0 for Godot-4
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Install.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="Quick-Start.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="Command-Line.html">Command Line</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="New-For-Godot-4.html#">Godot 4 Changes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="New-For-Godot-4.html#what-s-new-changed-in-gut-9-0-0-for-godot-4-0">What’s new/changed in GUT 9.0.0 for Godot 4.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="New-For-Godot-4.html#comparing-dictionaries-and-arrays">Comparing Dictionaries and Arrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="New-For-Godot-4.html#doubling-changes">Doubling Changes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="New-For-Godot-4.html#doubling-scripts-and-scenes">Doubling scripts and scenes</a></li>
<li class="toctree-l3"><a class="reference internal" href="New-For-Godot-4.html#doubling-inner-classes">Doubling Inner Classes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="New-For-Godot-4.html#setget-vs-set-and-get">setget vs set: and get:</a></li>
<li class="toctree-l2"><a class="reference internal" href="New-For-Godot-4.html#implementation-changes">Implementation Changes</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Test Scripts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="class_ref/class_guttest.html">GutTest</a></li>
<li class="toctree-l1"><a class="reference internal" href="Creating-Tests.html">Creating Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="Awaiting.html">Awaiting</a></li>
<li class="toctree-l1"><a class="reference internal" href="Inner-Test-Classes.html">Inner Test Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="Parameterized-Tests.html">Parameterized Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="Simulate.html">Simulate</a></li>
<li class="toctree-l1"><a class="reference internal" href="Comparing-Things.html">Comparing Things</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Doubling</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Doubles.html">Doubles</a></li>
<li class="toctree-l1"><a class="reference internal" href="Partial-Doubles.html">Partial Doubles</a></li>
<li class="toctree-l1"><a class="reference internal" href="Double-Strategy.html">Doubling Strategy</a></li>
<li class="toctree-l1"><a class="reference internal" href="Stubbing.html">Stubbing</a></li>
<li class="toctree-l1"><a class="reference internal" href="Spies.html">Spies</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="GDScript-Warnings.html">GDScript Warnings</a></li>
<li class="toctree-l1"><a class="reference internal" href="Export-Test-Results.html">Export Test Results</a></li>
<li class="toctree-l1"><a class="reference internal" href="Hooks.html">Hooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="Memory-Management.html">Memory Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="Mocking-Input.html">Mocking Input</a></li>
<li class="toctree-l1"><a class="reference internal" href="Orphans.html">Orphans</a></li>
<li class="toctree-l1"><a class="reference internal" href="Running-On-Devices.html">Running on Devices</a></li>
<li class="toctree-l1"><a class="reference internal" href="Tutorials.html">Tutorials</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Class Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Class-Ref.html">About Class Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="class_ref/class_addons_gut_cli_optparse.html">addons/gut/cli/optparse.gd</a></li>
<li class="toctree-l1"><a class="reference internal" href="class_ref/class_addons_gut_junit_xml_export.html">addons/gut/junit_xml_export.gd</a></li>
<li class="toctree-l1"><a class="reference internal" href="class_ref/class_addons_gut_parameter_factory.html">addons/gut/parameter_factory.gd</a></li>
<li class="toctree-l1"><a class="reference internal" href="class_ref/class_guthookscript.html">GutHookScript</a></li>
<li class="toctree-l1"><a class="reference internal" href="class_ref/class_gutinputfactory.html">GutInputFactory</a></li>
<li class="toctree-l1"><a class="reference internal" href="class_ref/class_gutinputsender.html">GutInputSender</a></li>
<li class="toctree-l1"><a class="reference internal" href="class_ref/class_gutmain.html">GutMain</a></li>
<li class="toctree-l1"><a class="reference internal" href="class_ref/class_guttest.html">GutTest</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">GUT</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Godot 4 Changes</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/New-For-Godot-4.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="godot-4-changes">
<h1>Godot 4 Changes<a class="headerlink" href="New-For-Godot-4.html#godot-4-changes" title="Permalink to this heading"></a></h1>
<p>These are changes to Godot that affect how GUT is used/implemented.  There is more information about these changes and how GUT has been altered below.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">setget</span></code> has been replaced with a completely new syntax.  More info at <a class="reference external" href="https://github.com/bitwes/Gut/issues/380">#380</a>.  Examples of the new way and the new <code class="docutils literal notranslate"><span class="pre">assert_property</span></code> method below.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">connect</span></code> has been significantly altered.  The signal related asserts will likely change to use <code class="docutils literal notranslate"><span class="pre">Callable</span></code> parameters instead of strings.  It is possible to use strings, so this may remain in some form.  More info in <a class="reference external" href="https://github.com/bitwes/Gut/issues/383">#383</a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">yield</span></code> has been replaced with <code class="docutils literal notranslate"><span class="pre">await</span></code>.  <code class="docutils literal notranslate"><span class="pre">yield_to</span></code>, <code class="docutils literal notranslate"><span class="pre">yield_for</span></code>, and <code class="docutils literal notranslate"><span class="pre">yield_frames</span></code> have been deprecated, the new methods are below.</p></li>
<li><p>Arrays are pass by reference now.</p></li>
<li><p>Dictionaries are compared by value now.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">File</span></code> and <code class="docutils literal notranslate"><span class="pre">Directory</span></code> have been replaced with <code class="docutils literal notranslate"><span class="pre">FileAccess</span></code> and <code class="docutils literal notranslate"><span class="pre">DirAccess</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is</span></code> no longer accepts a variable for a class.  You must use <code class="docutils literal notranslate"><span class="pre">is_instance_of</span></code> instead.</p></li>
</ul>
<section id="what-s-new-changed-in-gut-9-0-0-for-godot-4-0">
<h2>What’s new/changed in GUT 9.0.0 for Godot 4.0<a class="headerlink" href="New-For-Godot-4.html#what-s-new-changed-in-gut-9-0-0-for-godot-4-0" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Any methods that were deprecated in GUT 7.x have been removed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">assert_setget</span></code> no longer works (it now just fails with a message).  <code class="docutils literal notranslate"><span class="pre">assert_property</span></code> has been altered to work with the new setter/getter syntax.  <code class="docutils literal notranslate"><span class="pre">assert_set_property</span></code>, <code class="docutils literal notranslate"><span class="pre">assert_readonly_property</span></code>, and <code class="docutils literal notranslate"><span class="pre">assert_property_with_backing_variable</span></code> have been added.</p></li>
<li><p>To aid refactoring, <code class="docutils literal notranslate"><span class="pre">assert_property</span></code> and <code class="docutils literal notranslate"><span class="pre">assert_property_with_backing_variable</span></code> will warn if any “public accessors” are found for the property (‘get_’ and ‘set_’ methods).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">assert_property</span></code> now requires an instance instead of also working with a loaded objects.</p></li>
<li><p>Doubling strategy flags have been renamed to <code class="docutils literal notranslate"><span class="pre">INCLUDE_NATIVE</span></code> (was <code class="docutils literal notranslate"><span class="pre">FULL</span></code>) and <code class="docutils literal notranslate"><span class="pre">SCRIPT_ONLY</span></code> (was <code class="docutils literal notranslate"><span class="pre">PARTIAL</span></code>).  The default is <code class="docutils literal notranslate"><span class="pre">SCRIPT_ONLY</span></code>.  I wanted something more descriptive and less likely to be confused with partial doubles.</p></li>
<li><p>The various <code class="docutils literal notranslate"><span class="pre">yield_</span></code> methods have been deprecated but are still supported to make conversions easier.  The new syntax for <code class="docutils literal notranslate"><span class="pre">yield_to</span></code>, <code class="docutils literal notranslate"><span class="pre">yield_for</span></code>, or <code class="docutils literal notranslate"><span class="pre">yield_frames</span></code> is:</p></li>
</ul>
<div class="highlight-gdscript notranslate"><div class="highlight"><pre><span></span><span class="n">await</span><span class="w"> </span><span class="n">yield_to</span><span class="p">(</span><span class="n">signaler</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;the_signal_name&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;optional message&#39;</span><span class="p">)</span>
<span class="n">await</span><span class="w"> </span><span class="n">yield_for</span><span class="p">(</span><span class="mf">1.5</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;optional message&#39;</span><span class="p">)</span>
<span class="n">await</span><span class="w"> </span><span class="n">yield_frames</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;optional message&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>The replacement methods for the various <code class="docutils literal notranslate"><span class="pre">yield_</span></code> methods are <code class="docutils literal notranslate"><span class="pre">wait_seconds</span></code>, <code class="docutils literal notranslate"><span class="pre">wait_idle_frames</span></code>, <code class="docutils literal notranslate"><span class="pre">wait_physics_frames</span></code>, and <code class="docutils literal notranslate"><span class="pre">wait_for_signal</span></code>.</p></li>
</ul>
<div class="highlight-gdscript notranslate"><div class="highlight"><pre><span></span><span class="n">await</span><span class="w"> </span><span class="n">wait_for_signal</span><span class="p">(</span><span class="n">signaler</span><span class="o">.</span><span class="n">the_signal</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;optional message&#39;</span><span class="p">)</span><span class="w"> </span><span class="c1"># wait for signal or 5 seconds</span>
<span class="n">await</span><span class="w"> </span><span class="n">wait_seconds</span><span class="p">(</span><span class="mf">1.5</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;optional message&#39;</span><span class="p">)</span>
<span class="n">await</span><span class="w"> </span><span class="n">wait_physics_frames</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;optional message&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Doubling no longer supports paths to a script or scene.  Load the script or scene first and pass that to <code class="docutils literal notranslate"><span class="pre">double</span></code>.  See the “Doubling Changes” section for more details.</p></li>
<li><p>Doubling Inner Classes now requires you to call <code class="docutils literal notranslate"><span class="pre">register_inner_classes</span></code> first.  See the “Doubling Changes” section for more details.</p></li>
<li><p>Comparing Dictionary/Arrays with <code class="docutils literal notranslate"><span class="pre">assert_eq</span></code>, <code class="docutils literal notranslate"><span class="pre">assert_eq_deep</span></code>, and the new <code class="docutils literal notranslate"><span class="pre">assert_same</span></code> and <code class="docutils literal notranslate"><span class="pre">assert_not_same</span></code> for comparing references.  See Godot’s new <code class="docutils literal notranslate"><span class="pre">is_same</span></code> function for details on how <code class="docutils literal notranslate"><span class="pre">assert_same</span></code> works (it’s just an assertion wrapper around <code class="docutils literal notranslate"><span class="pre">is_same</span></code>).  See the section “Comparing Dictionaries and Arrays” below for more details.</p></li>
</ul>
</section>
<section id="comparing-dictionaries-and-arrays">
<h2>Comparing Dictionaries and Arrays<a class="headerlink" href="New-For-Godot-4.html#comparing-dictionaries-and-arrays" title="Permalink to this heading"></a></h2>
<p>In Godot 3.x dictionaries were compared by reference and arrays were compared by value.  In 4.0 both are compared by value.  Godot 4.0 introduces the <code class="docutils literal notranslate"><span class="pre">is_same</span></code> method which (amongst other things) will compare dictionaries and arrays by reference.</p>
<p>GUT’s <code class="docutils literal notranslate"><span class="pre">assert_eq</span></code> and <code class="docutils literal notranslate"><span class="pre">assert_ne</span></code> changed to match Godot’s behavior.  To compare by reference you can use the new <code class="docutils literal notranslate"><span class="pre">assert_same</span></code> or <code class="docutils literal notranslate"><span class="pre">assert_not_same</span></code>.  This works with arrays and dictionaries.  Review Godot’s documentation for <code class="docutils literal notranslate"><span class="pre">is_same</span></code>.  When comparing dictionaries and arrays it is recommended that you use <code class="docutils literal notranslate"><span class="pre">assert_eq_deep</span></code> since it provides more detailed output than <code class="docutils literal notranslate"><span class="pre">assert_eq</span></code>.</p>
<p>The shallow compare functionality has been removed since it no longer applies.  Shallow compares would compare the elements of an array or dictionary by value.  In Godot 3.x this meant that dictionaries inside of arrays or dictionaries would be compared by reference and everything else would be compared by value.  Since arrays and dictionaries are both compared by value now, shallow compares are no different (functionally) than deep compares.  The following methods have been removed.  Calling these methods will generate a failure and an error.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">compare_shallow</span></code> (causes failure and returns <code class="docutils literal notranslate"><span class="pre">null</span></code> which will likely result in a runtime error)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">assert_eq_shallow</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">assert_ne_shallow</span></code></p></li>
</ul>
<p>Final note: <code class="docutils literal notranslate"><span class="pre">assert_eq</span></code> does not use <code class="docutils literal notranslate"><span class="pre">assert_eq_deep</span></code> since <code class="docutils literal notranslate"><span class="pre">assert_eq_deep</span></code> compares each element of both arrays/dictionaries and provides detailed info about what is different.  This can be slow for large arrays/dictionaries.  Godot’s <code class="docutils literal notranslate"><span class="pre">==</span></code> operator uses a hashing function which is much faster but does not provide information about what is different in each array/dictionary.  With <code class="docutils literal notranslate"><span class="pre">assert_eq</span></code>, <code class="docutils literal notranslate"><span class="pre">assert_eq_deep</span></code>, and <code class="docutils literal notranslate"><span class="pre">assert_same</span></code> (and their inverses) you have fine grained control over the type of comparison that is performed.</p>
</section>
<section id="doubling-changes">
<h2>Doubling Changes<a class="headerlink" href="New-For-Godot-4.html#doubling-changes" title="Permalink to this heading"></a></h2>
<section id="doubling-scripts-and-scenes">
<h3>Doubling scripts and scenes<a class="headerlink" href="New-For-Godot-4.html#doubling-scripts-and-scenes" title="Permalink to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">double</span></code> method no longer supports paths to scripts or scenes.  You should <code class="docutils literal notranslate"><span class="pre">load</span></code> the script or scene first, and then pass that to <code class="docutils literal notranslate"><span class="pre">double</span></code> instead.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">MyScript</span> <span class="o">=</span> <span class="n">load</span><span class="p">(</span><span class="s1">&#39;res://my_script.gd&#39;</span><span class="p">)</span>
<span class="n">var</span> <span class="n">dbl</span> <span class="o">=</span> <span class="n">double</span><span class="p">(</span><span class="n">MyScript</span><span class="p">)</span><span class="o">.</span><span class="n">new</span><span class="p">()</span>
</pre></div>
</div>
<p>If you pass a string then an error message will be printed and <code class="docutils literal notranslate"><span class="pre">double</span></code> will return <code class="docutils literal notranslate"><span class="pre">null</span></code>.  This will most likely result in a runtime error when you attempt to instantiate your double.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;Invalid call. Nonexistent function &#39;</span><span class="n">new</span><span class="s1">&#39; in base &#39;</span><span class="n">Nil</span><span class="s1">&#39;.&#39;</span>
</pre></div>
</div>
</section>
<section id="doubling-inner-classes">
<h3>Doubling Inner Classes<a class="headerlink" href="New-For-Godot-4.html#doubling-inner-classes" title="Permalink to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">double</span></code> method no longer supports strings for the path of the base script or a string of the name of the Inner Class.  You must call <code class="docutils literal notranslate"><span class="pre">register_inner_classes</span></code> then pass the Inner Class to <code class="docutils literal notranslate"><span class="pre">double</span></code>.  You only have to do this once, so it is best to call it in <code class="docutils literal notranslate"><span class="pre">before_all</span></code> or a pre-hook script.  Registering multiple times does nothing.  Failing to call <code class="docutils literal notranslate"><span class="pre">register_inner_classes</span></code> will result in a GUT error and a runtime error.</p>
<div class="highlight-gdscript notranslate"><div class="highlight"><pre><span></span><span class="c1"># Given that SomeScript contains the class InnerClass that you wish to double:</span>
<span class="k">var</span><span class="w"> </span><span class="n">SomeScript</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">load</span><span class="p">(</span><span class="s1">&#39;res://some_script.gd&#39;</span><span class="p">)</span>

<span class="k">func</span><span class="w"> </span><span class="n">before_all</span><span class="p">():</span>
<span class="w">    </span><span class="n">register_inner_classes</span><span class="p">(</span><span class="n">SomeScript</span><span class="p">)</span>

<span class="k">func</span><span class="w"> </span><span class="n">test_foo</span><span class="p">():</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">dbl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">double</span><span class="p">(</span><span class="n">SomeScript</span><span class="o">.</span><span class="n">InnerClass</span><span class="p">)</span><span class="o">.</span><span class="n">new</span><span class="p">()</span>
</pre></div>
</div>
<p>This approach was used to make tests cleaner and less susceptible to typos.  If Godot adds meta data to inner classes that point back to the source script, then <code class="docutils literal notranslate"><span class="pre">register_inner_classes</span></code> can be removed later and no other changes will need to be made.</p>
</section>
</section>
<section id="setget-vs-set-and-get">
<h2>setget vs set: and get:<a class="headerlink" href="New-For-Godot-4.html#setget-vs-set-and-get" title="Permalink to this heading"></a></h2>
<p>In godot 4.0 <code class="docutils literal notranslate"><span class="pre">setget</span></code> has been replaced with <code class="docutils literal notranslate"><span class="pre">set(val):</span></code> and <code class="docutils literal notranslate"><span class="pre">get():</span></code> pseudo methods which make properties more concrete.  This is a welcome change, but comes with a few caveats.</p>
<p>Here’s an example of usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">foo</span> <span class="o">=</span> <span class="mi">10</span><span class="p">:</span>
    <span class="n">get</span><span class="p">():</span>
        <span class="k">return</span> <span class="n">foo</span>
    <span class="nb">set</span><span class="p">(</span><span class="n">val</span><span class="p">):</span>
        <span class="n">foo</span> <span class="o">=</span> <span class="n">val</span>
</pre></div>
</div>
<p>This means you no longer need to define methods for your accessors.  Though you may still want to for organizational purposes.</p>
<p>One downside to this approach is that there is no way to set the <code class="docutils literal notranslate"><span class="pre">foo</span></code> without going through the accessor.  Many times, internally, you will want to set a value for a property without going through the setter.  This is still possible, but you have to make a backing variable.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">_foo</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">var</span> <span class="n">foo</span> <span class="o">=</span> <span class="mi">10</span><span class="p">:</span>
    <span class="n">get</span><span class="p">():</span>
        <span class="k">return</span> <span class="n">_foo</span>
    <span class="nb">set</span><span class="p">(</span><span class="n">val</span><span class="p">):</span>
        <span class="n">_foo</span> <span class="o">=</span> <span class="n">val</span>
        <span class="n">foo_changed</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>
</pre></div>
</div>
<p>With this approach you can set <code class="docutils literal notranslate"><span class="pre">_foo</span></code> internally in your class without triggering the <code class="docutils literal notranslate"><span class="pre">foo_changed</span></code> signal.  When you see <code class="docutils literal notranslate"><span class="pre">foo</span> <span class="pre">=</span></code> anywhere in your code, it will be going through the accessor.  When you see <code class="docutils literal notranslate"><span class="pre">_foo</span> <span class="pre">=</span></code> you are only setting the backing variable.</p>
<p>To test this new paradigm <code class="docutils literal notranslate"><span class="pre">assert_setget</span></code> has been removed.  <code class="docutils literal notranslate"><span class="pre">assert_property</span></code> has changed to work with the new syntax.  <code class="docutils literal notranslate"><span class="pre">assert_property_with_backing_variable</span></code> was added to validate the backing variable wiring.  If you use <code class="docutils literal notranslate"><span class="pre">assert_property_with_backing_variable</span></code> it will verify that the property has accessors and will also look for a <code class="docutils literal notranslate"><span class="pre">_&lt;varname&gt;</span></code> variable with the same name and verify it is being set.</p>
<p><code class="docutils literal notranslate"><span class="pre">assert_property</span></code> will generate a warning when it finds “public” accessors for these properties (<code class="docutils literal notranslate"><span class="pre">get_foo</span></code>, <code class="docutils literal notranslate"><span class="pre">set_foo</span></code>).</p>
</section>
<section id="implementation-changes">
<h2>Implementation Changes<a class="headerlink" href="New-For-Godot-4.html#implementation-changes" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">Gut</span></code> control has been removed.  Adding a <code class="docutils literal notranslate"><span class="pre">Gut</span></code> node to a scene to run tests will no longer work.  This control dates back to Godot 2.x days.  With GUT 7.4.1 I believe the in-editor Gut Panel has enough features to discontinue using a Scene/<code class="docutils literal notranslate"><span class="pre">Gut</span></code> control to run tests.</p></li>
<li><p>The GUI for GUT has been simplified to reflect that it is no longer used to run tests, just display progress and output.  It has also been decoupled from <code class="docutils literal notranslate"><span class="pre">gut.gd</span></code>.  <code class="docutils literal notranslate"><span class="pre">gut.gd</span></code> is now a <code class="docutils literal notranslate"><span class="pre">Node</span></code> instead of a <code class="docutils literal notranslate"><span class="pre">Control</span></code> and all GUI logic has been removed.  New signals have been added so that a GUI can be made without <code class="docutils literal notranslate"><span class="pre">gut.gd</span></code> having to know anything about it.  As a result, GUT can now be run without a GUI if that ever becomes something we want to do.</p></li>
<li><p>Replaced the old <code class="docutils literal notranslate"><span class="pre">yield_between_tests</span></code> flag with <code class="docutils literal notranslate"><span class="pre">paint_after</span></code>.  This property (initially set to .1s) tells GUT how long to wait before it pauses for 1 frame to allow for painting the screen.  This value is checked after each test, so longer tests can still cause a delay in the painting of the screen.  This has made the painting a little choppier but has cut down the time it takes to run tests (200 simple tests in 20 scripts dropped from 2+ seconds to .5 seconds to run).  This feature is settable from the command line, .gutconfig.json, and GutPanel.</p></li>
<li><p>Doubling has changed significantly.</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Command-Line.html" class="btn btn-neutral float-left" title="Command Line" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="class_ref/class_guttest.html" class="btn btn-neutral float-right" title="GutTest" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Butch Wesley.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>